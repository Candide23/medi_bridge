<div class="min-vh-100 py-5 px-3 d-flex flex-column align-items-center bg-light">
  <div class="container" style="max-width: 900px;">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fw-bold text-dark">Your Health Records</h2>
      <%= link_to "+ Upload New Record", new_health_record_path, class: "btn btn-primary" %>
    </div>

    <% if @health_records.any? %>
      <% @health_records.each do |record| %>
        <div class="card mb-4 border rounded shadow-sm">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <span class="badge text-bg-light text-uppercase fw-semibold"><%= record.record_type %></span>
              <span class="badge bg-secondary-subtle text-dark"><%= record.language %></span>
            </div>

            <div class="mt-3 text-muted">
              <% if record.document.attached? %>
                <i class="bi bi-file-earmark-text me-1"></i>
                <%= record.document.filename.to_s %>
              <% else %>
                <i class="bi bi-file-earmark-x me-1"></i> No file attached
              <% end %>
            </div>

            <div class="d-flex flex-wrap gap-2 mt-3">
              <%= link_to health_record_path(record), class: "btn btn-outline-primary btn-sm" do %>
                <i class="bi bi-eye me-1"></i> View
              <% end %>

              <% if record.document.attached? %>
                <%= link_to rails_blob_path(record.document, disposition: "attachment"), class: "btn btn-outline-secondary btn-sm", target: "_blank" do %>
                  <i class="bi bi-download me-1"></i> Download
                <% end %>
              <% end %>

              <%= link_to edit_health_record_path(record), class: "btn btn-outline-secondary btn-sm" do %>
                <i class="bi bi-pencil-square me-1"></i> Edit
              <% end %>

              <%= button_to health_record_path(record),
                            method: :delete,
                            data: { turbo_confirm: "Are you sure you want to delete this record?" },
                            class: "btn btn-outline-danger btn-sm",
                            form: { style: "display: inline-block;" } do %>
                <i class="bi bi-trash me-1"></i> Delete
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="alert alert-secondary text-center rounded shadow-sm">
        <h5 class="mb-2">No health records yet</h5>
        <p class="text-muted">Click below to upload your first document.</p>
        <%= link_to "Upload New Record", new_health_record_path, class: "btn btn-primary px-4" %>
      </div>
    <% end %>
  </div>
</div>










